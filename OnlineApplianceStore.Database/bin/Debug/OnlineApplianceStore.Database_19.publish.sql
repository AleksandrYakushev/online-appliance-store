/*
Deployment script for OnlineApplianceStore

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "OnlineApplianceStore"
:setvar DefaultFilePrefix "OnlineApplianceStore"
:setvar DefaultDataPath "D:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\MSSQL\DATA\"
:setvar DefaultLogPath "D:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Creating [dbo].[Customer_Create]...';


GO
CREATE PROCEDURE [dbo].[Customer_Create]
	@RoleId int,
	@CityId int,
	@Name nvarchar (30),
	@LastName nvarchar (30),
	@Phone nvarchar (20),
	@Password nvarchar (30),
	@Address nvarchar (100),
	@Email nvarchar (50),
	@Birthday date,
	@RegistrationDate datetime2,
	@LastUpdateDate datetime2
AS
	INSERT INTO dbo.Customer
	VALUES (@RoleId, @CityId, @Name, @LastName, @Phone, @Password, @Address, @Email, @Birthday, SYSDATETIME(), SYSDATETIME())

	SELECT SCOPE_IDENTITY()
GO
PRINT N'Creating [dbo].[Customer_DeleteById]...';


GO
CREATE Procedure [dbo].[Customer_DeleteById]
  @ID BIGINT
  As
  UPDATE dbo.Customer
  SET 
  IsDeleted = 1
  WHERE (Id = @ID)
GO
PRINT N'Creating [dbo].[Customer_SelectAll]...';


GO
CREATE PROCEDURE [dbo].[Customer_SelectAll]
	AS
SELECT 
Id, RoleId, Phone, [Name], LastName, [Address], Email, Birthday, RegistrationDate, LastUpdateDate, IsDeleted
FROM
[dbo].[Customer]
GO
PRINT N'Creating [dbo].[Customer_SelectById]...';


GO
CREATE PROCEDURE [dbo].[Customer_SelectById]
	@ID int
AS
	SELECT 
	Id, RoleId, Phone, [Name], LastName, [Address], Email, Birthday, RegistrationDate, LastUpdateDate, IsDeleted
	FROM
	[dbo].[Customer]
	WHERE (Id = @ID)
GO
PRINT N'Creating [dbo].[Customer_UpdateById]...';


GO
CREATE PROCEDURE [dbo].[Customer_UpdateById]
	@Id bigint	,
	@RoleId int,
	@CityId int,
	@Name nvarchar (30),
	@LastName nvarchar (30),
	@Phone nvarchar (20),
	@Password nvarchar (30),
	@Address nvarchar (100),
	@Email nvarchar (50),
	@Birthday date,
	@RegistrationDate datetime2,
	@LastUpdateDate datetime2
AS
	UPDATE dbo.Customer
	SET
	RoleId = @RoleId,
	CityId = @CityId,
	[Name] = @Name,
	LastName = @LastName,
	Phone = @Phone,
	[Password] = @Password,
	[Address] = @Address, 
	Email = @Email,
	Birthday = @Birthday,
	RegistrationDate = @RegistrationDate,
	LastUpdateDate = @LastUpdateDate

	WHERE (Id = @Id)
GO
PRINT N'Update complete.';


GO
